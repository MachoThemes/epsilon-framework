!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/assets/js/",e(e.s=6)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.args=t}return t.prototype.request=function(){var t=this;jQuery.ajax({type:"POST",data:{action:"epsilon_framework_ajax_action",args:t.args},dataType:"json",url:EpsilonWPUrls.ajaxurl,success:function(e){t.result=e,jQuery(t).trigger("epsilon-received-success")},error:function(t,e,n){console.log(t+" :: "+e+" :: "+n)}})},t}();e.EpsilonAjaxRequest=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.min=1,this.max=20,this.step=1,this.context=jQuery(t.container).hasClass("slider-container")?jQuery(t.container):jQuery(t.container).find(".slider-container"),this.min=t.params.sliderControls.min,this.max=t.params.sliderControls.max,this.step=t.params.sliderControls.step,this.value=t.params.value,this.context&&this.init()}return t.prototype.init=function(){var t=this.context.find(".ss-slider"),e=this.context.find(".rl-slider"),n=e.attr("id"),i=t.attr("id");jQuery("#"+i).slider({value:this.value,range:"min",min:this.min,max:this.max,step:this.step,slide:function(t,e){jQuery("#"+n).attr("value",e.value)},stop:function(t,e){jQuery("#"+n).trigger("change")}}),jQuery(e).on("focus",function(){jQuery(this).blur()}),jQuery("#"+n).attr("value",jQuery("#"+i).slider("value"))},t}();e.EpsilonRangeSlider=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),this.context=jQuery(t.container),this.editorId=t.params.id+"-editor",e&&(this.editorId=t.params.id),n&&wp.editor.remove(this.editorId),this.init()}return t.prototype.init=function(){wp.editor.initialize(this.editorId,{tinymce:{wpautop:!0,browser_spellcheck:!0,mediaButtons:!1,wp_autoresize_on:!0,toolbar1:"link numlist bullist forecolor backcolor bold italic underline",setup:function(t){t.on("change",function(e){t.save(),jQuery(t.getElement()).trigger("change")})}},quicktags:!0})},t}();e.EpsilonTextEditor=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e,n=this;this.control=t,this.context=jQuery(t.container).find(".epsilon-color-picker"),this.settings={changeDelay:500,theme:"default",change:this.changePallete,format:"rgb",opacity:!0},"function"==typeof jQuery.fn.minicolors&&(""!==this.context.attr("placeholder")&&(this.context.defaultValue=this.context.attr("placeholder")),this.control.hasOwnProperty("params")&&this.control.params.hasOwnProperty("mode")&&"rgba"===this.control.params.mode&&(this.settings.format="rgb",this.settings.opacity=!0),this.context.minicolors(this.settings),e=this.context.parents(".customize-control-epsilon-color-picker").find("a"),e.length||(e=this.context.parents(".repeater-field-epsilon-color-picker").find("a")),e.on("click",function(t){t.preventDefault(),n.instance=jQuery(this).parents(".customize-control-epsilon-color-picker").find("input.epsilon-color-picker"),n.instance.length||(n.instance=jQuery(this).parents(".repeater-field-epsilon-color-picker").find("input.epsilon-color-picker")),n.instance.minicolors("value",jQuery(this).attr("data-default")),n.instance.trigger("change")}))}return t.prototype.changePallete=function(t,e){jQuery(".epsilon-color-scheme-selected").find('*[data-field-id="'+jQuery(this).attr("data-customize-setting-link")+'"]').css("background-color",t)},t}();e.EpsilonColorPicker=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.context=jQuery(t.container),this.multiple=this.context.find(".epsilon-customizer-navigation-container").length>1,this.multiple?this.initMultiple():this.init()}return t.prototype.initMultiple=function(){this.context.find(".epsilon-customizer-navigation-container:not(.initiated)").first().addClass("initiated").map(function(t,e){jQuery(e).find("a").on("click",function(t){t.preventDefault(),void 0!==wp.customize.section(jQuery(this).attr("data-customizer-section"))&&(jQuery(t.target).attr("data-doubled")?wp.customize.section(jQuery(this).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(this).attr("data-customizer-section")).focus())})})},t.prototype.init=function(){var t=this.context.find(".epsilon-customizer-navigation-container");t.length&&t.on("click",t.find("a"),function(t){t.preventDefault(),void 0!==wp.customize.section(jQuery(t.target).attr("data-customizer-section"))&&(jQuery(t.target).attr("data-doubled")?wp.customize.section(jQuery(t.target).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(t.target).attr("data-customizer-section")).focus())})},t}();e.EpsilonCustomizerNavigation=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.control=t,this.context=t.container,this.handleEvents()}return t.prototype.handleEvents=function(){var t=this;this.context.on("click",".epsilon-control-group > a",function(e){e.preventDefault();var n=jQuery(this).attr("data-value");jQuery(this).siblings().removeClass("active"),jQuery(this).addClass("active"),t.control.hasOwnProperty("repeater")?jQuery(this).parent().find("input").val(n).trigger("change"):t.control.setting.set(jQuery(this).attr("data-value"))})},t}();e.EpsilonButtonGroup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(7),n(8),n(9),n(10),n(12),n(13),n(14),n(15),n(16),n(18),n(20),n(22),n(23),n(25),n(31),n(48),n(49),n(51),n(53),n(54),n(56),n(57),new(n(59).EpsilonSectionDescriptionEnhancer),new(n(60).EpsilonZoneFocus)},function(t,e){},function(t,e){wp.customize.settingConstructor["epsilon-section-repeater"]=wp.customize.Setting.extend({defaults:_.extend({},wp.customize.Setting.prototype.defaults,{setting_type:"epsilon-setting-repeater"})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);wp.customize.controlConstructor["epsilon-slider"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonRangeSlider(t),t.container.on("change","input.rl-slider",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11);wp.customize.controlConstructor["epsilon-icon-picker"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonIconPicker(t),t.container.on("change","input.epsilon-icon-picker",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.control=t,this.control.container.find('[id="'+this.control.params.id+'"]').fontIconPicker({source:EpsilonIconPack})}return t}();e.EpsilonIconPicker=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);wp.customize.controlConstructor["epsilon-text-editor"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonTextEditor(t),t.container.on("change keyup","textarea",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e){wp.customize.controlConstructor["epsilon-toggle"]=wp.customize.Control.extend({ready:function(){var t=this;t.container.on("change","input.onoffswitch-checkbox",function(e){t.setting.set(jQuery(e.target).prop("checked"))})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);wp.customize.controlConstructor["epsilon-color-picker"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonColorPicker(t),t.container.on("change","input.epsilon-color-picker",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4);wp.customize.controlConstructor["epsilon-customizer-navigation"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonCustomizerNavigation(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17);wp.customize.controlConstructor["epsilon-image"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonImage(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){function t(t){this.control=t,this.context=jQuery(t.container),this.handleEvents()}return t.prototype.handleEvents=function(){var t,e,n,o,s=this,r={id:"",url:""},a=this.context.find(".epsilon-controller-image-container > input");this.context.on("click",".image-upload-button",function(i){t=wp.media({multiple:!1}).open(),t.on("select",function(){e=t.state().get("selection").first(),n=a.attr("data-size"),void 0===e.toJSON().sizes[n]&&(n="full"),r.id=e.id,r.url=e.toJSON().sizes[n].url,s.saveValue(r),s.setImage(r.url),s.context.find(".actions .image-upload-remove-button").show(),_.isEmpty(s.control.params.default)||s.context.find(".actions .image-default-button").show()})}),this.context.on("click",".image-upload-remove-button",function(t){t.preventDefault(),o=s.context.find(".epsilon-image"),s.saveValue({id:"",url:""}),o.length&&o.find("img").fadeOut(200,function(){var t,e=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]};o.removeClass("epsilon-image").addClass("placeholder").html(e),t=new i.EpsilonAjaxRequest(s),t.request(),jQuery(t).on("epsilon-received-success",function(e){_.isUndefined(t.result[n])||o.find(".recommended-size").text(t.result[n].width+" x "+t.result[n].height)})}),jQuery(t.target).hide(),_.isEmpty(s.control.params.default)||s.context.find(".actions .image-default-button").show()}),s.context.on("click",".image-default-button",function(t){t.preventDefault(),o=s.context.find(".epsilon-image"),s.saveValue(s.control.params.default),s.setImage(s.control.params.default.url),s.context.find(".actions .image-upload-remove-button").show()})},t.prototype.setImage=function(t){var e=this.context.find(".epsilon-image").length?this.context.find(".epsilon-image"):this.context.find(".placeholder");e.length&&(e.removeClass("epsilon-image placeholder").addClass("epsilon-image"),e.html(""),e.append('<img style="display:none" src="'+t+'" />'),e.find("img").fadeIn(200))},t.prototype.saveValue=function(t){var e=this.context.find(".epsilon-controller-image-container > input");"object"==typeof t&&""!==t.id?(this.control.setting.set(JSON.stringify(t)),jQuery(e).attr("value",JSON.stringify(t)).trigger("change")):(this.control.setting.set(""),jQuery(e).attr("value","").trigger("change"))},t}();e.EpsilonImage=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19);wp.customize.controlConstructor["epsilon-typography"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonTypography(t),t.container.on("change",".customize-control-content > .epsilon-typography-input",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t){var e=this;this.loading=!1,this.control=t,this.context=jQuery(t.container),this.container=this.context.find(".epsilon-typography-container"),this.panel=this.control.container.parent(),this.panel.addClass("epsilon-is-loadable"),this.selects=this.container.find("select"),this.inputs=this.container.find(".epsilon-typography-input"),this.sliders=this.container.find(".slider-container"),this.id=t.params.id,this.init(),this.clearButton(),wp.customize.previewer.bind("epsilon-set-typography-loading",function(t){e.stateChanger(!1)})}return t.prototype.stateChanger=function(t){t?this.startLoading():this.stopLoading()},t.prototype.startLoading=function(){this.loading||(this.loading=!0,this.panel.addClass("epsilon-loading"))},t.prototype.stopLoading=function(){var t=this;setTimeout(function(){t.loading=!1,t.panel.removeClass("epsilon-loading")},150)},t.prototype.clearButton=function(){var t=this;this.context.on("click",".set-default",function(e){t.setDefaults()})},t.prototype.setDefaults=function(){var t=this;_.each(this.control.params.fontDefaults[this.id],function(e,n){if(_.contains(["font-weight","font-style"],n)&&jQuery("#"+t.id+"-"+n).prop("checked",""!==e).trigger("change"),_.contains(["letter-spacing","line-height"],n)&&jQuery("#"+t.id+"-"+n).val(e).trigger("change"),_.contains(["font-family"],n)){var i=jQuery("#"+t.id+"-"+n)[0];i=i.selectize,i.setValue(e,!1)}})},t.prototype.init=function(){var t=this;try{this._selectize=this.selects.selectize()}catch(t){console.warn("selectize not yet loaded")}this.context.on("click",".epsilon-typography-advanced > a",function(t){var e=jQuery(this).attr("data-toggle");t.preventDefault(),jQuery(this).toggleClass("active").parent().toggleClass("active"),jQuery("#"+e).slideToggle().addClass("active")}),jQuery.each(this.sliders,function(e,n){var o=jQuery(n).attr("data-slider-type"),s={container:n,params:{value:0,id:"",sliderControls:{min:0,max:10,step:1}}};switch(o){case"letter-spacing":s.params.value=t.control.params.inputs["letter-spacing"],s.params.id=t.control.params.id+"-letter-spacing",s.params.sliderControls.min=0,s.params.sliderControls.max=5,s.params.sliderControls.step=.1;break;case"line-height":s.params.value=t.control.params.inputs["line-height"],s.params.id=t.control.params.id+"-line-height",s.params.sliderControls.min=0,s.params.sliderControls.max=40,s.params.sliderControls.step=1;break;default:s.params.value=t.control.params.inputs["font-size"],s.params.id=t.control.params.id+"-font-size",s.params.sliderControls.min=0,s.params.sliderControls.max=40,s.params.sliderControls.step=1}new i.EpsilonRangeSlider(s)}),this.handleEvents()},t.prototype.handleEvents=function(){var t=this;this.inputs.on("change",_.debounce(function(){t.stateChanger(!0);var e=t._parseJson();jQuery("#hidden_input_"+t.id).val(e).trigger("change")},300))},t.prototype._parseJson=function(){var t=this,e={action:"epsilon_generate_typography_css",class:"Epsilon_Typography",id:this.control.id,data:{selectors:this.control.params.selectors,stylesheet:this.control.params.stylesheet,id:this.control.id,json:{}}},n=wp.customize;return jQuery.each(this.inputs,function(n,i){var o=jQuery(i).attr("id"),s=t.id+"-",r=jQuery(this).attr("type");o=o.replace(s,""),e.data.json[o]="checkbox"===r?jQuery(this).prop("checked")?jQuery(i).val():"":jQuery(i).val()}),n.previewer.send("update-inline-typography-css",e),JSON.stringify(e.data)},t}();e.EpsilonTypography=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(21);wp.customize.controlConstructor["epsilon-color-scheme"]=wp.customize.Control.extend({ready:function(){var t=this;wp.customize.bind("ready",function(){new i.EpsilonColorSchemes(t)}),t.container.on("change",".epsilon-color-scheme-input",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this.loading=!1,this.requests=0,this.requestsIndex=0,this.control=t,this.context=this.control.container.find(".epsilon-color-scheme"),this.panel=this.control.container.parent(),this.panel.addClass("epsilon-is-loadable"),this.context.length&&(this.init(),wp.customize.previewer.bind("epsilon-set-color-schemes-loading",function(t){e.stateChanger(!1)}))}return t.prototype.stateChanger=function(t){t?this.startLoading():this.stopLoading()},t.prototype.startLoading=function(){this.loading||(this.loading=!0,this.panel.addClass("epsilon-loading"))},t.prototype.stopLoading=function(){var t=this;this.requestsIndex+=1,this.requests===this.requestsIndex&&setTimeout(function(){t.loading=!1,t.panel.removeClass("epsilon-loading"),t.requests=0,t.requestsIndex=0},350)},t.prototype.init=function(){var t=this,e=this.context.find(".epsilon-color-scheme-option"),n=this.context.parent().find("[data-customize-setting-link]").first(),i=JSON.parse(e.first().find("input").val()),o=wp.customize,s=[],r={action:"epsilon_generate_color_scheme_css",class:"Epsilon_Color_Scheme",id:"",data:{}};jQuery.each(i,function(t,e){s.push(t)}),_.each(s,function(e){r.data[e]=o(e)(),void 0!==o.control(e)&&o.control(e).container.on("change","input.epsilon-color-picker",_.debounce(function(){t.stateChanger(!0),t.context.siblings(".epsilon-color-scheme-selected").find(".epsilon-color-scheme-palette").find('*[data-field-id="'+e+'"]').css("background",jQuery(this).attr("value")),r.data[e]=o(e)(),t.requests+=1,o.previewer.send("update-inline-color-schemes-css",r)},250))}),e.on("click",function(){var e=jQuery(this).attr("data-color-id"),i=jQuery(this).find("input").val();i&&(i=JSON.parse(i)),jQuery.each(i,function(e,n){jQuery("#customize-control-"+e+" .epsilon-color-picker").minicolors("value",n),o(e).set(n),t.context.siblings(".epsilon-color-scheme-selected").find(".epsilon-color-scheme-palette").find('*[data-field-id="'+e+'"]').css("background",n)}),jQuery(this).siblings(".epsilon-color-scheme-option").removeClass("selected"),jQuery(this).addClass("selected"),n.val(e).trigger("change")}),jQuery(".epsilon-control-dropdown").on("click",function(){jQuery(this).toggleClass("active"),jQuery(this).find("span").toggleClass("dashicons-arrow-down dashicons-arrow-up"),t.context.slideToggle()})},t}();e.EpsilonColorSchemes=i},function(t,e){wp.customize.controlConstructor["epsilon-upsell"]=wp.customize.Control.extend({ready:function(){var t=this;t.container.on("click",".epsilon-upsell-label",function(e){e.preventDefault(),jQuery(this).toggleClass("opened").find("i").toggleClass("dashicons-arrow-down-alt2 dashicons-arrow-up-alt2"),t.container.find(".epsilon-upsell-container").slideToggle(200)})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(24);wp.customize.controlConstructor["epsilon-layouts"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonLayouts(t),t.container.on("change","input",function(e){t.setting.set(jQuery(e.target).val())})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.html={buttonLeft:'<a href="#" data-action="left"><span class="dashicons dashicons-arrow-left"></span> </a>',buttonRight:'<a href="#" data-action="right"><span class="dashicons dashicons-arrow-right"></span> </a>'},this.activeColumns=null,this.colClasses="col12 col11 col10 col9 col8 col7 col6 col5 col4 col3 col2 col1",this.control=t,this.context=this.control.container,this.layoutButtons=this.context.find(".epsilon-control-group > a"),this.resizeButtons=this.context.find(".epsilon-layouts-setup > .epsilon-column > a"),this.maxColumns=this.layoutButtons.length,this.minSpan=parseFloat(this.control.params.minSpan),this.lastColumnsState=null,this.dataLink=this.context.find("[data-customize-setting-link]").first(),this.handle_actions(),this.context.on("epsilon_column_count_changed epsilon_column_size_changed",this._save)}return t.prototype.handle_actions=function(){this._advanced_toggler(),this._column_resize(),this._column_recount(),this._layout_select(),this._equalize_columns()},t.prototype._advanced_toggler=function(){this.context.on("click",".epsilon-control-advanced",function(t){t.preventDefault(),jQuery(this).toggleClass("active"),jQuery("#"+jQuery(this).attr("data-unique-id")).slideToggle().addClass("active")})},t.prototype._column_resize=function(){var t,e,n,i=this;this.context.on("click",".epsilon-column > a",function(o){n=jQuery(this).parent(),t=n.index(),e="right"===jQuery(this).attr("data-action")?i.context.find(".epsilon-layouts-setup > .epsilon-column").eq(t+1):i.context.find(".epsilon-layouts-setup > .epsilon-column").eq(t-1),i._calc_column_resize(e,n)})},t.prototype._column_recount=function(){var t,e,n,i=this;this.context.on("epsilon_column_count_change",function(o){if(i.activeColumns=parseFloat(o.columns.selected),i.lastColumnsState=o.columns.beforeSelection,i.activeColumns!==i.lastColumnsState){if(1===i.activeColumns){var s=i.context.find(".epsilon-control-set-advanced");s.removeClass("epsilon-control-set-advanced").addClass("epsilon-control-set"),s.find(".epsilon-control-advanced").fadeOut(),i.context.find(".epsilon-control-advanced").removeClass("active");var r=i.context.find(".epsilon-control-advanced").attr("data-unique-id");i.context.find("#"+r).slideUp().removeClass("active")}else{var s=i.context.find(".epsilon-control-set");s.removeClass("epsilon-control-set").addClass("epsilon-control-set-advanced"),s.find(".epsilon-control-advanced").fadeIn()}if(t=i.lastColumnsState<i.activeColumns?"adding":"subtracting",e=i.activeColumns-i.lastColumnsState,"subtracting"===t)i.context.find(".epsilon-layouts-setup > .epsilon-column").slice(-(i.lastColumnsState-i.activeColumns)).remove();else for(n=0;n<e;n++)i.context.find(".epsilon-layouts-setup").append('<div class="epsilon-column col4">'+i.html.buttonLeft+i.html.buttonRight+"</div>");i.context.trigger({type:"epsilon_column_count_changed",instance:i})}})},t.prototype._layout_select=function(){var t=this;this.layoutButtons.on("click",function(e){e.preventDefault();var n=jQuery(this).attr("data-button-value");t.context.trigger({type:"epsilon_column_count_change",columns:{selected:parseFloat(n),beforeSelection:t.context.find(".epsilon-layouts-setup > .epsilon-column").length}}),jQuery(this).addClass("active").siblings("a").removeClass("active")})},t.prototype._equalize_columns=function(){var t=this;this.context.on("epsilon_column_count_changed",function(e){switch(t.activeColumns){case 2:t.context.find(".epsilon-column").removeClass(t.colClasses),t.context.find(".epsilon-column").first().addClass("col8").attr("data-columns",8),t.context.find(".epsilon-column").last().addClass("col4").attr("data-columns",4);break;default:if(null===t.activeColumns)return;t.context.find(".epsilon-column").removeClass(t.colClasses).addClass("col"+12/t.activeColumns).attr("data-columns",12/t.activeColumns)}})},t.prototype._calc_column_resize=function(t,e){var n,i=t.attr("data-columns");void 0!==i&&(i=parseFloat(i),parseFloat(i)!==this.minSpan&&(n=e.attr("data-columns"),n=parseFloat(n),t.attr("data-columns",i-1).removeClass(this.colClasses).addClass("col"+(i-1)),e.attr("data-columns",n+1).removeClass(this.colClasses).addClass("col"+(n+1)),this.context.trigger({type:"epsilon_column_size_changed",instance:this})))},t.prototype._save=function(t){var e={columnsCount:t.instance.activeColumns,columns:{}};jQuery.each(t.instance.context.find(".epsilon-column"),function(t){var n=jQuery(this).attr("data-columns");if(void 0!==n){n=parseFloat(n);var i={index:t+1,span:n};e.columns[t+1]=i}}),null===e.columnsCount&&(e.columnsCount=t.instance.context.find(".epsilon-column").length),t.instance.dataLink.val(JSON.stringify(e)).trigger("change")},t}();e.EpsilonLayouts=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(26);wp.customize.controlConstructor["epsilon-repeater"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonFieldRepeater(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),o=n(29),s=function(){function t(t){this.rows=[],this.currentIndex=0,this.control=t,this.context=t.container,this.utils=this.loadUtils(),this.template=this.loadTemplate(),this.repeaterContainer=this.getRepeaterContainer(),this.settingField=this.context.find("[data-customize-setting-link]"),_.isUndefined(this.control.params.choices.limit)||(this.limit=!(0>=this.control.params.choices.limit)&&parseInt(this.control.params.choices.limit)),this.handleEvents(),this.createExistingRows(),this.initSortable(),this.handleFieldDelete()}return t.prototype.getRepeaterContainer=function(){return this.context.find(".repeater-fields")},t.prototype.loadUtils=function(){return new o.EpsilonRepeaterUtils(this)},t.prototype.loadTemplate=function(){return this.utils.repeaterTemplate()},t.prototype.createExistingRows=function(){var t=this;if(this.control.params.value.length)for(var e=0;e<this.control.params.value.length;e++){var n=void 0,o=void 0;n=t.utils.add(this.control.params.value[e]),o=new i.EpsilonRepeaterAddons(t,n),o.initPlugins()}},t.prototype.handleEvents=function(){var t=this;this.context.on("click","button.epsilon-repeater-add",function(e){var n,o;e.preventDefault(),!t.limit||t.currentIndex<t.limit?(n=t.utils.add(),o=new i.EpsilonRepeaterAddons(t,n),o.initPlugins()):jQuery(t.control.selector+" .limit").addClass("highlight")}),this.context.on("click",".repeater-row-remove",function(e){t.handleRowDecrementor(),(!t.limit||t.currentIndex<t.limit)&&jQuery(t.control.selector+" .limit").removeClass("highlight")})},t.prototype.initSortable=function(){var t=this;this.repeaterContainer.sortable({handle:".repeater-row-header",axis:"y",distance:15,stop:function(e,n){setTimeout(t.utils.sort(n),200)}})},t.prototype.handleRowIncrementor=function(){this.currentIndex++},t.prototype.handleRowDecrementor=function(){this.currentIndex--},t.prototype.handleFieldDelete=function(){var t=this;wp.customize.previewer.bind("epsilon-field-repeater-delete",function(e){t.control.id===e.control&&t.utils.removeRow(t.rows[e.field])})},t}();e.EpsilonFieldRepeater=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(28),o=n(0),s=n(5),r=n(1),a=n(2),c=n(3),l=n(4),u=function(){function t(t,e){this.control=t,this.row=e,this.proxy=this.control.control.params,this.row.hasOwnProperty("type")&&(this.proxy=this.proxy.sections[this.row.type])}return t.prototype.initPlugins=function(){"epsilon-section-repeater"===this.control.control.params.type?this.initRangeSlidersSectionRepeater():this.initRangeSliders(),this.initImageUploads(),this.initIconPicker(),this.initTextEditor(),this.initColorPickers(),this.initButtonGroup(),this.initCustomization(),this.initTemplateSelector(),this.row.hasOwnProperty("type")&&(this.initCustomizerNavigation(),this.initSelectize())},t.prototype.initTemplateSelector=function(){var t={container:this.row.container,repeater:!0};new i.EpsilonTemplateSelector(t)},t.prototype.initButtonGroup=function(){var t=this,e={container:t.row.container,repeater:!0};new s.EpsilonButtonGroup(e)},t.prototype.initSelectize=function(){this.row.container.find(".epsilon-selectize").selectize({plugins:["remove_button"]})},t.prototype.initCustomizerNavigation=function(){var t,e=this;for(var n in e.proxy.fields)"epsilon-customizer-navigation"===e.proxy.fields[n].type&&(t=e.row,new l.EpsilonCustomizerNavigation(t))},t.prototype.initColorPickers=function(){var t,e=this;t=e.row,new c.EpsilonColorPicker(t)},t.prototype.initImageUploads=function(){var t,e=this;e.row.container.on("click keypress",".epsilon-controller-image-container .image-upload-button",function(n){n.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(n)||(t=jQuery(this).parents(".epsilon-controller-image-container"),e._imageUpload(t))}),e.row.container.on("click keypress",".epsilon-controller-image-container .image-upload-remove-button",function(n){n.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(n)||(t=jQuery(this).parents(".epsilon-controller-image-container"),e._imageRemoval(t))})},t.prototype._imageUpload=function(t){var e,n,i,o,s=this,r={},a=wp.media({multiple:!1}).open();a.on("select",function(){o=t.find("input"),e=a.state().get("selection").first(),n=o.attr("data-size"),void 0===e.toJSON().sizes[n]&&(n="full"),r.id=e.id,r.url=e.toJSON().sizes[n].url,i="url"===o.attr("data-save-mode")?r.url:r.id,o.val(i),s._setImage(t,r.url),t.find(".actions .image-upload-remove-button").show()})},t.prototype._imageRemoval=function(t){var e=t.find(".epsilon-image");e.length&&e.find("img").fadeOut(200,function(){var n,i=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]},r=t.find("input").attr("data-size");e.removeClass("epsilon-image").addClass("placeholder").html(i),n=new o.EpsilonAjaxRequest(s),n.request(),jQuery(n).on("epsilon-received-success",function(t){_.isUndefined(n.result[r])||e.find(".recommended-size").text(n.result[r].width+" x "+n.result[r].height)})}),t.find(".actions .image-upload-remove-button").hide(),t.find("input").attr("value","").trigger("change")},t.prototype._setImage=function(t,e){var n=t.find(".epsilon-image").length?t.find(".epsilon-image"):t.find(".placeholder");n.length&&(n.removeClass("epsilon-image placeholder").addClass("epsilon-image"),n.html(""),n.append('<img style="display:none" src="'+e+'" />'),n.find("img").fadeIn(200)),t.find("input").trigger("change")},t.prototype.initIconPicker=function(){var t=this;_.filter(this.proxy.fields,function(t){return"epsilon-icon-picker"===t.type}).map(function(e){t.row.container.find('input[data-field="'+e.id+'"]').fontIconPicker({source:EpsilonIconPack})})},t.prototype.initTextEditor=function(){for(var t=this,e=jQuery(t.row.container).find("textarea"),n=0;n<e.length;n++)!function(t){setTimeout(function(){var n={container:jQuery(e[t]).parent(),params:{id:jQuery(e[t]).attr("id")}};new a.EpsilonTextEditor(n,!0)},100*t)}(n)},t.prototype.initRangeSlidersSectionRepeater=function(){var t=this;_.filter(this.proxy.fields,function(t){return"epsilon-slider"===t.type}).map(function(e){var n={container:t.row.container.find('input[data-field="'+e.id+'"]').parent(),params:{id:e.id,sliderControls:{min:e.choices.min,max:e.choices.max,step:e.choices.step}}};t.row.hasOwnProperty("type")&&(n.params.value=parseFloat(e.default),void 0!==t.control.control.params.value[t.row.index]&&(n.params.value=parseFloat(t.control.control.params.value[t.row.index][e.id]))),new r.EpsilonRangeSlider(n)})},t.prototype.initRangeSliders=function(){var t,e=this;for(var n in e.proxy.fields)if("epsilon-slider"===e.proxy.fields[n].type){if(!0,t={container:e.row.container,params:{id:e.proxy.fields[n].id,sliderControls:{min:e.proxy.fields[n].choices.min,max:e.proxy.fields[n].choices.max,step:e.proxy.fields[n].choices.step}}},e.row.hasOwnProperty("type"))return t.params.value=parseFloat(e.proxy.fields[n].default),void 0!==e.control.control.params.value[e.row.index]&&(t.params.value=parseFloat(e.control.control.params.value[e.row.index][n])),void new r.EpsilonRangeSlider(t);void 0!==e.proxy.value[e.row.index]&&(t.params.value=parseFloat(e.proxy.value[e.row.index][n])),t.container=jQuery(t.container).find(".epsilon-slider:not(.initiated)").first().addClass("initiated"),new r.EpsilonRangeSlider(t)}},t.prototype.initCustomization=function(){var t;if(this.proxy.customization&&this.proxy.customization.enabled&&void 0!==this.proxy.customization.styling[this.proxy.id+"_background_color_opacity"])return!0,t={container:this.row.container.find(".tab-panel.styling .epsilon-slider"),params:{id:this.proxy.id+"_background_color_opacity",sliderControls:{min:this.proxy.customization.styling[this.proxy.id+"_background_color_opacity"].choices.min,max:this.proxy.customization.styling[this.proxy.id+"_background_color_opacity"].choices.max,step:this.proxy.customization.styling[this.proxy.id+"_background_color_opacity"].choices.step}}},this.row.hasOwnProperty("type")&&(t.params.value=parseFloat(this.proxy.customization.styling[this.proxy.id+"_background_color_opacity"].default),void 0!==this.control.control.params.value[this.row.index]&&void 0!==this.control.control.params.value[this.row.index][this.proxy.id+"_background_color_opacity"]&&(t.params.value=parseFloat(this.control.control.params.value[this.row.index][this.proxy.id+"_background_color_opacity"]))),new r.EpsilonRangeSlider(t)},t}();e.EpsilonRepeaterAddons=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.control=t,this.context=t.container,this.handleEvents()}return t.prototype.handleEvents=function(){var t=this;this.context.on("click",".epsilon-layout-select-set > a",function(e){e.preventDefault();var n=jQuery(this).attr("data-value");jQuery(this).siblings().removeClass("active"),jQuery(this).addClass("active"),t.control.hasOwnProperty("repeater")?jQuery(this).parent().find("input").val(n).trigger("change"):t.control.setting.set(jQuery(this).attr("data-value"))})},t}();e.EpsilonTemplateSelector=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(30),s=function(){function t(t){this.control=t}return t.prototype.delete=function(t,e){var n,i,o=this,s=this.getValue();s[e]&&this.control.rows[e]&&(delete s[e],delete this.control.rows[e]),s=this.cleanArray(s),this.control.rows=o.cleanArray(this.control.rows),jQuery.each(this.control.rows,function(t,e){o.setIndex(e,t)}),this.setValue(s),n=1;for(i in this.control.rows)this.control.rows.hasOwnProperty(i)&&this.control.rows[i]&&(o.updateLabel(this.control.rows[i]),n++)},t.prototype.add=function(t,e){var n,i,s,r,a=_.memoize(this.control.template),c={},l=this.getValue();if(!a)return!1;if(n=jQuery.extend(!0,{},this.control.control.params.fields),t)for(i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(n[i].default=t[i]);n.index=this.control.currentIndex,a=a(n),s=jQuery(a).appendTo(this.control.repeaterContainer),r=new o.EpsilonRepeaterRow(this.control,s),s.trigger("row:add",[this.control.currentIndex,n]),this.handleRowEvents(r),this.control.rows[this.control.currentIndex]=r;for(i in n)n.hasOwnProperty(i)&&(c[i]=n[i].default);return void 0===c.index&&(c.index=this.control.currentIndex),l[this.control.currentIndex]=c,t||this.setValue(l),this.control.handleRowIncrementor(),r},t.prototype.sort=function(t){var e=this,n=this.control.repeaterContainer.find(".repeater-row"),o=this.getValue(),s=[],r=[],a=[];n.each(function(t,e){s.push(jQuery(e).data("row"))}),jQuery.each(s,function(t,n){r[t]=e.control.rows[n],e.setIndex(r[t],t),a[t]=o[n]});for(var c=n.find("textarea"),l=0;l<c.length;l++)!function(t){setTimeout(function(){var e={container:jQuery(c[t]).parent(),params:{id:jQuery(c[t]).attr("id")}};new i.EpsilonTextEditor(e,!0,!0)},100*t)}(l);this.control.rows=r,this.setValue(a),this.control.repeaterContainer.trigger("row:stopped-dragging",[s]),e.control.control.params.selective_refresh&&wp.customize.previewer.refresh()},t.prototype.setValue=function(t){this.control.control.setting.set([]),this.control.control.setting.set(t)},t.prototype.getValue=function(){return this.control.control.setting.get()},t.prototype.updateField=function(t,e,n){this.control.rows[t.index],this.control.utils.getValue();this.updateRepeater(t,e,n)},t.prototype.updateRepeater=function(t,e,n){var i=this.control.rows[t.index],o=this.control.utils.getValue();if(i&&this.control.control.params.fields[e]&&!_.isUndefined(o[i.index][e])){switch(this.control.control.params.fields[e].type){case"checkbox":case"epsilon-toggle":o[i.index][e]=jQuery(n).prop("checked");break;default:o[i.index][e]=jQuery(n).val()}this.control.utils.setValue(o)}},t.prototype.repeaterTemplate=function(){var t,e={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(n){return(t=_.template(jQuery(".customize-control-epsilon-repeater-content-field").html(),null,e))(n)}},t.prototype.setIndex=function(t,e){t.index=e,t.container.attr("data-row",e),t.container.data("row",e),this.control.utils.updateLabel(t)},t.prototype.removeRow=function(t){t.container.slideUp(300,function(){jQuery(this).detach()}),t.container.trigger("row:remove",[t.index])},t.prototype.updateLabel=function(t){var e,n,i;if("field"===t.label.type&&(e=t.container.find('.repeater-field [data-field="'+t.label.field+'"]'),_.isFunction(e.val)&&""!==(n=e.val())))return _.isUndefined(this.control.control.params.fields[t.label.field])||_.isUndefined(this.control.control.params.fields[t.label.field].type)||("select"===this.control.control.params.fields[t.label.field].type?_.isUndefined(this.control.control.params.fields[t.label.field].choices)||_.isUndefined(this.control.control.params.fields[t.label.field].choices[n])||(n=this.control.control.params.fields[t.label.field].choices[n]):"radio"!==this.control.control.params.fields[t.label.field].type&&"radio-image"!==this.control.control.params.fields[t.label.field].type||(i=this.control.control.selector+' [data-row="'+t.index+'"] .repeater-field [data-field="'+t.label.field+'"]:checked',n=jQuery(i).val())),void t.header.find(".repeater-row-label").text(n);t.header.find(".repeater-row-label").text(t.label.value+" "+(t.index+1))},t.prototype.toggleMinimize=function(t,e){void 0===e&&(e=!1);var n=this;t.hasOwnProperty("type")&&(e=!0),t.container.find(".repeater-row-content").slideToggle(300,function(){t.container.toggleClass("minimized"),t.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2"),e&&(jQuery("body").removeClass("adding-section"),jQuery("body").removeClass("adding-doubled-section"),jQuery("#sections-left-"+n.control.control.params.id).find(".available-sections").removeClass("opened"),wp.customize.previewer.send("epsilon-section-focused",{index:t.index,closed:t.container.hasClass("minimized")}),jQuery.each(t.container.siblings(),function(t,e){jQuery(e).hasClass("minimized")||(jQuery(e).addClass("minimized"),jQuery(e).find(".repeater-row-content").slideToggle(300,function(){jQuery(e).find("repeater-row-header").addClass("minimized").find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")}))}))})},t.prototype.cleanArray=function(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e},t.prototype.handleRowEvents=function(t){var e=this;t.container.on("row:remove",function(n,i){e.delete(t,i),"epsilon-section-repeater"===e.control.control.params.type&&jQuery("body").removeClass("adding-doubled-section"),e.control.control.params.selective_refresh&&wp.customize.previewer.refresh()}),t.header.on("mousedown",function(){t.container.trigger("row:start-dragging")})},t}();e.EpsilonRepeaterUtils=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.index=t.currentIndex,this.container=e,this.label=this.getLabel(t),this.header=this.container.find(".repeater-row-header"),this.footer=this.container.find(".repeater-row-footer"),this.handleEvents(t),t.utils.updateLabel(this)}return t.prototype.getLabel=function(t){return t.control.params.rowLabel},t.prototype.handleEvents=function(t){var e=t,n=this;this.header.on("click",function(t){jQuery(t.target).is(".repeater-row-hide")||jQuery(t.target).hasClass("epsilon-section-hidden")||e.utils.toggleMinimize(n)}),this.container.on("click",".repeater-row-minimize",function(){e.utils.toggleMinimize(n)}),this.container.on("click",".repeater-row-remove",function(){e.utils.removeRow(n)}),this.container.on("keyup change","input, select, textarea",function(t){e.utils.updateField(n,jQuery(t.target).data("field"),t.target),e.utils.updateLabel(n),n.container.trigger("row:update",[n.index,jQuery(t.target).data("field"),t.target])})},t}();e.EpsilonRepeaterRow=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(32);wp.customize.controlConstructor["epsilon-section-repeater"]=wp.customize.Control.extend({ready:function(){var t=this,e=jQuery(this.container).attr("id"),n=document.getElementById(e),o=new MutationObserver(function(e){var n=e[e.length-1];jQuery(n.target).is(":visible")&&!jQuery(n.target).hasClass("epsilon-section-repeater-initiated")&&(jQuery(n.target).addClass("epsilon-section-repeater-initiated"),new i.EpsilonSectionRepeater(t))});this.container.is(":visible")&&(this.container.addClass("epsilon-section-repeater-initiated"),new i.EpsilonSectionRepeater(t)),null!==n&&o.observe(n,{attributes:!0,childList:!1,attributeFilter:["style"]})}})},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(33),s=n(34),r=n(35),a=n(46),c=n(47),l=function(){function t(t){this.$actions=i({},r.default),this.$events=i({},o.default,s.default),this.$utils=i({},a.default),this.$connectors=i({},c.default),this.state={loading:!0,addingSection:!1,importingSection:!1,currentIndex:0,sorting:!1,rows:[]},this.$_instance=t,this.$ID=this.$_instance.params.id,this.repeaterContainer=this.$_instance.container.find(".repeater-sections"),this.template=this.$utils.repeaterTemplate(),this.loading=!1,this._bindFunctions(),this._createExistingSections(),this._layoutReconstruct(),this._eventListener(),this._initSearch(),this._initSorting()}return Object.defineProperty(t.prototype,"loading",{get:function(){return this.state.loading},set:function(t){switch(this.state.loading=t,this.state.loading){case!0:this.repeaterContainer.addClass("epsilon-section-repeater-is-loading");break;default:this.repeaterContainer.removeClass("epsilon-section-repeater-is-loading")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sorting",{get:function(){return this.state.sorting},set:function(t){switch(this.state.sorting=t,this.state.sorting){case!0:this.state.rows.map(function(t){t.forceMinimize(),t.sorting=!0}),this.repeaterContainer.addClass("epsilon-section-repeater-is-sorting");break;default:this.state.rows.map(function(t){return t.sorting=!1}),this.repeaterContainer.removeClass("epsilon-section-repeater-is-sorting")}},enumerable:!0,configurable:!0}),t.prototype._bindFunctions=function(){this.$connectors.setValue=this.$connectors.setValue.bind(this),this.$connectors.getValue=this.$connectors.getValue.bind(this),this.$connectors.addNewSection=this.$connectors.addNewSection.bind(this),this.$actions.addSection=this.$actions.addSection.bind(this),this.$actions.removeSection=this.$actions.removeSection.bind(this),this.$actions.sortSections=this.$actions.sortSections.bind(this)},t.prototype._createExistingSections=function(){var t=this;this.loading=!0,this.$_instance.params.value.map(function(e){t.$actions.addSection(e)}),this.loading=!1},t.prototype._layoutReconstruct=function(){this.$utils.moveElements.call(this),this.availableSections=jQuery("#sections-left-"+this.$ID).find(".available-sections"),this.importableSections=jQuery("#importable-sections-"+this.$ID).find(".available-sections")},t.prototype._eventListener=function(){this.$events.closeOnCustomizerBack.call(this),this.$events.addMoreSectionButton.call(this),this.$events.importSectionButton.call(this),this.$events.addSectionButton.call(this),this.$events.handleSectionDescription.call(this),this.$events.handleIntegrationEvent.call(this),this.$events.handleNavigation.call(this),this.$events.handleNavigationToFieldRepeater.call(this)},t.prototype._initSearch=function(){var t=this;jQuery("#sections-left-"+this.$ID).find(".sections-search-input").on("keyup change",_.debounce(function(e){var n=e.target.value;void 0!==n&&(n=n.toLowerCase()),jQuery("#sections-left-"+t.$ID).find(".epsilon-section").map(function(t,e){var i=jQuery(e).attr("data-id");void 0!==i&&(i=i.toLowerCase()),jQuery(e)[-1!==i.indexOf(n)?"show":"hide"]()})},500))},t.prototype._initSorting=function(){var t=this;this.repeaterContainer.parent().on("click",".epsilon-sort-sections",function(){switch(t.sorting=!t.sorting,t.sorting){case!0:t.repeaterContainer.sortable({handle:".repeater-row-header",axis:"y",distance:15,stop:function(e,n){return t.$actions.sortSections(e,n)}});break;default:t.repeaterContainer.sortable("destroy")}})},t}();e.EpsilonSectionRepeater=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={addSectionButton:function(){var t=this;this.availableSections.on("click",'.epsilon-section [data-action="add"]',function(e){e.preventDefault(),t.$actions.addSection({type:jQuery(e.target).parent().attr("data-id")}),jQuery("body").removeClass("adding-section"),jQuery("#sections-left-"+t.$ID).find(".available-sections").removeClass("opened"),t.$_instance.params.selective_refresh&&wp.customize.previewer.refresh()})},addMoreSectionButton:function(){var t=this;this.$_instance.container.find(".epsilon-add-new-section").on("click keydown",function(e){var n=jQuery("body");n.hasClass("adding-doubled-section")||(n.removeClass("importing-section"),n.toggleClass("adding-section"),t.importableSections.removeClass("opened"),t.availableSections.toggleClass("opened"),n.hasClass("adding-section")&&!jQuery(e.target).is(".epsilon-add-new-section")&&t.$_instance.control.close())})},importSectionButton:function(){var t=this;this.$_instance.container.find(".epsilon-import-sections").on("click keydown",function(e){var n=jQuery("body");n.hasClass("adding-doubled-section")||(n.removeClass("importing-section"),n.toggleClass("adding-section"),t.availableSections.removeClass("opened"),t.importableSections.toggleClass("opened"),n.hasClass("importing-section")&&!jQuery(e.target).is(".epsilon-import-sections")&&t.$_instance.control.close())})},closeOnCustomizerBack:function(){var t=this;wp.customize.section(this.$_instance.params.section,function(e){e.container.find(".accordion-section-title, .customize-section-back").on("click keydown",function(e){if(!wp.customize.utils.isKeydownButNotEnterEvent(e)){t.state.rows.map(function(t){t.container.hasClass("minimized")||t.minimizeToggle()});var n=jQuery("body");n.removeClass("adding-section importing-section"),n.find(".doubled-section-opened").removeClass("doubled-section-opened"),t.availableSections.removeClass("opened"),t.importableSections.removeClass("opened")}})})},handleIntegrationEvent:function(){this.$_instance.params.integrations&&jQuery("#sections-left-"+this.$ID).on("click",".available-sections-tab-toggler",function(t){t.preventDefault();var e,n=jQuery(t.target).attr("data-tab");jQuery(t.target).siblings().removeClass("active"),jQuery(t.target).addClass("active"),void 0!==n&&(e=jQuery('[data-tab-id="'+n+'"]'),e.siblings("div").removeClass("active").slideUp(),e.slideDown().addClass("active"))})},handleSectionDescription:function(){jQuery("#sections-left-"+this.$_instance.params.id).on("click",'.epsilon-section [data-action="info"]',function(t){t.preventDefault(),jQuery(t.target).parent().find(".epsilon-section-image-description").toggleClass("active"),jQuery(t.target).parent().find(".epsilon-section-description").toggleClass("active")})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={handleNavigation:function(){var t=this;wp.customize.previewer.bind("epsilon-section-edit",function(e){void 0!==wp.customize.section(e.customizerSection)&&(t.state.rows.map(function(t){t.container.hasClass("minimized")||t.index==e.section||t.minimizeToggle()}),wp.customize.section(e.customizerSection).focus(),!_.isUndefined(t.state.rows[e.section])&&t.state.rows[e.section].container.hasClass("minimized")&&t.state.rows[e.section].minimizeToggle(),"string"==typeof e.sectionTab&&t.state.rows[e.section].container.find("nav").find("a[data-item="+e.sectionTab+"]").trigger("click"))})},handleNavigationToFieldRepeater:function(){var t=this;wp.customize.previewer.bind("epsilon-field-repeater-edit",function(e){if(void 0!==wp.customize.section(e.customizerSection)&&void 0!==wp.customize.section(e.doubledSection)){var n=wp.customize.control(e.control),i=wp.customize.section(e.doubledSection);t.state.rows.map(function(t){t.container.hasClass("minimized")||t.index==e.section||t.minimizeToggle()}),wp.customize.section(e.customizerSection).focus(),!_.isUndefined(t.state.rows[e.section])&&t.state.rows[e.section].container.hasClass("minimized")&&t.state.rows[e.section].minimizeToggle(),jQuery("body").hasClass("adding-doubled-section")||setTimeout(function(t){i.headContainer.trigger("click")},400),n.container.find('.repeater-row:not(".minimized")').find(".repeater-row-header").trigger("click"),n.container.find(".repeater-row[data-row='"+parseFloat(e.field)+"']").find(".repeater-row-header").trigger("click")}})}}},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(36);e.default={addSection:function(t){var e,n=_.memoize(this.template);return!!n&&(void 0!==this.$_instance.params.sections[t.type]&&(e=this.$utils.mergeData.call(this,t.type),e=this.$utils.setTemplateDefaults(e,t),e.index=this.state.currentIndex,this.state.currentIndex+=1,n=n(e),this.state.rows.push(new o.EpsilonSectionRepeaterRow(this,jQuery(n).appendTo(this.repeaterContainer),e,t.type)),1===_.size(t)&&t.hasOwnProperty("type")&&this.$connectors.addNewSection(this.$utils.pluckValues(i({},e,t))),this.state.rows[e.index]))},removeSection:function(t){this.loading=!0,this.state.rows.splice(t.index,1);var e=this.$connectors.getValue();return e=e.filter(function(e){return t.index!==e.index}),e=this.$utils.resetIndexes.call(this,e),this.$connectors.setValue(e),this.loading=!1,t.index},sortSections:function(t,e){var n=this;e.item.trigger("epsilon-changed-position");var i=0;this.repeaterContainer.find(".repeater-row").map(function(t,e){jQuery(e).attr("data-row",i),i++}),this.state.rows.map(function(t){return t.forceResetIndex()});var o=this.$connectors.getValue();o.map(function(t,e){o[e].index=n.state.rows[e].index}),this.state.rows=_.sortBy(this.state.rows,function(t){return t.index}),o=_.sortBy(o,function(t){return t.index}),this.$connectors.setValue(o)}}},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(37),s=function(){function t(t,e,n,i){this.initiated=[],this._state={loading:!1,updatingValues:!1,toggled:!1,sorting:!1},this.externalInits={selectize:"SectionRepeaterSelectize",epsilon_text_editor:"SectionRepeaterEditor",epsilon_color_picker:"SectionRepeaterColorPicker",epsilon_image:"SectionRepeaterImage",epsilon_customizer_navigation:"SectionRepeaterNavigation",epsilon_slider:"SectionRepeaterSlider",epsilon_button_group:"SectionRepeaterButtonGroup",epsilon_icon_picker:"SectionRepeaterIconPicker"},this.data=n,this.index=n.index,this.type=i,this.$ID=t.$ID,this.label=t.$_instance.params.sections[this.type].title,this.container=e,this.header=this.container.find(".repeater-row-header"),this.content=this.container.find(".repeater-row-content"),this.footer=this.container.find(".repeater-row-footer"),this.loading=!0,this.initiateExternalLibraries(),this.handleVisibility(),this.updateLabel(),this.addTabs(),this.handleEvents(t)}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._state.loading},set:function(t){switch(this._state.loading=t,this._state.loading){case!0:this.container.addClass("epsilon-section-is-loading");break;default:this.container.removeClass("epsilon-section-is-loading")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toggled",{get:function(){return this._state.toggled},set:function(t){this._state.toggled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sorting",{get:function(){return this._state.sorting},set:function(t){this._state.sorting=t},enumerable:!0,configurable:!0}),t.prototype._configureInits=function(){var t=this.externalInits,e=[];_.each(this.data,function(n){if(void 0!==n.id&&void 0!==n.type&&"text"!==n.type&&"hidden"!==n.type&&"select"!==n.type&&"epsilon-toggle"!==n.type){var i=n.type.replace(/-/g,"_");e.push({id:n.id,type:i,init:t.hasOwnProperty(i)?t[i]:"unknown"})}}),this.externalLibs=_.chain(e).groupBy("type").map(function(t,e){return{elements:t,type:e}}).value()},t.prototype.initiateExternalLibraries=function(){this._configureInits()},t.prototype.constructExternal=function(){var t=this;this.externalLibs.map(function(e){var n=t.externalInits[e.type];void 0!==n&&t._constructExternal(e,n)}),this.toggled=!0},t.prototype._constructExternal=function(t,e){var n=this;t.elements.map(function(s,r){var a=i({},s,{mainId:n.$ID,container:n.container});switch(n.data[a.id].hasOwnProperty("linking")&&(a=i({},a,{linking:n.data[a.id].linking})),e){case"SectionRepeaterEditor":n.initiated.push(new o.SectionRepeaterEditor(a));break;case"SectionRepeaterSelectize":n.initiated.push(new o.SectionRepeaterSelectize(a));break;case"SectionRepeaterColorPicker":n.initiated.push(new o.SectionRepeaterColorPicker(a));break;case"SectionRepeaterImage":n.initiated.push(new o.SectionRepeaterImage(a));break;case"SectionRepeaterNavigation":n.initiated.push(new o.SectionRepeaterNavigation(a));break;case"SectionRepeaterSlider":n.initiated.push(new o.SectionRepeaterSlider(i({},a,n.data[a.id].choices,{value:n.data[a.id].default})));break;case"SectionRepeaterButtonGroup":n.initiated.push(new o.SectionRepeaterButtonGroup(a));break;case"SectionRepeaterIconPicker":n.initiated.push(new o.SectionRepeaterIconPicker(i({},a,{icons:n.data[a.id].icons})))}t.elements.length===r+1&&setTimeout(function(){return n.loading=!1},300)})},t.prototype.handleVisibility=function(){var t="visible";this.data.hasOwnProperty(this.type+"_section_visibility")&&(t=this.data[this.type+"_section_visibility"].default),this.header.addClass("epsilon-section-"+t)},t.prototype.updateLabel=function(){this.header.find(".repeater-row-label").html(this.label)},t.prototype.handleEvents=function(t){this.minimizeEvent(),this.hideEvent(),this.removeEvent(t),this.updateEvent(t)},t.prototype.hideEvent=function(){var t=this;this.header.on("click",".repeater-row-hide",function(e){e.preventDefault();var n=t.container.find('[data-field="'+t.type+'_section_visibility"]'),i=n.val(),o={hidden:"visible",visible:"hidden"};o.hasOwnProperty(i)&&(t.header.removeClass("epsilon-section-visible epsilon-section-hidden").addClass("epsilon-section-"+o[i]),n.val(o[i]).trigger("change"))})},t.prototype.minimizeEvent=function(){var t=this;this.header.on("click",function(e){jQuery(e.target).is(".repeater-row-hide")||jQuery(e.target).hasClass("epsilon-section-hidden")||t.minimizeToggle()}),this.container.on("click",".repeater-row-minimize",function(){return t.minimizeToggle()})},t.prototype.removeEvent=function(t){var e=this;this.container.on("click",".repeater-row-remove",function(){e.container.slideUp(300,function(){return e.container.detach()}),t.$actions.removeSection(e)})},t.prototype.updateEvent=function(t){var e=this;this.container.on("keyup change","input, select, textarea, checkbox",function(n){var i=t.$connectors.getValue(),o=jQuery(n.target).attr("type");switch(void 0===o&&jQuery(n.target).is("select")&&jQuery(n.target).attr("multiple")&&(o="multiple-select"),o){case"checkbox":case"epsilon-toggle":i[e.index][jQuery(n.target).data("field")]=jQuery(n.target).prop("checked");break;case"multiple-select":var s=jQuery(n.target)[0];i[e.index][jQuery(n.target).data("field")]=s.selectize.getValue();break;default:i[e.index][jQuery(n.target).data("field")]=n.target.value}t.$_instance.params.selective_refresh&&wp.customize.previewer.send("updated-section-repeater",{control:e.$ID,postId:t.$_instance.params.save_as_meta,value:i[e.index],index:e.index}),t.$connectors.setValue(i)})},t.prototype.minimizeToggle=function(){var t=this;this.sorting||(this.toggled||this.constructExternal(),this.content.slideToggle(300,function(){jQuery("body").removeClass("adding-section adding-doubled-section"),t.container.toggleClass("minimized"),t.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2"),jQuery("#sections-left-"+t.$ID).find(".available-sections").removeClass("opened"),wp.customize.previewer.send("epsilon-section-focused",{index:t.index,closed:t.container.hasClass("minimized")}),t.container.siblings().map(function(t,e){jQuery(e).hasClass("minimized")||(jQuery(e).addClass("minimized"),jQuery(e).find(".repeater-row-content").slideToggle(300,function(){jQuery(e).find(".repeater-row-header").find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").toggleClass("dashicons-arrow-up-alt2").toggleClass("dashicons-arrow-down-alt2")}))})}))},t.prototype.forceMinimize=function(){var t=this;this.content.slideUp(300,function(){jQuery("body").removeClass("adding-section adding-doubled-section"),t.container.addClass("minimized"),t.header.find(".dashicons:not(.repeater-row-remove):not(.repeater-row-hide)").addClass("dashicons-arrow-down-alt2").removeClass("dashicons-arrow-up-alt2")})},t.prototype.forceResetIndex=function(){this.index=parseFloat(this.container.attr("data-row"))},t.prototype.addTabs=function(){jQuery(this.container).find('[data-group="regular"]').wrapAll('<div data-tab-id="regular" class="tab-panel regular active"></div>'),jQuery(this.container).find('[data-group="styling"]').wrapAll('<div data-tab-id="styling" class="tab-panel styling"></div>'),jQuery(this.container).find('[data-group="layout"]').wrapAll('<div data-tab-id="layout" class="tab-panel layout"></div>'),jQuery(this.container).find('[data-group="colors"]').wrapAll('<div data-tab-id="colors" class="tab-panel colors"></div>'),this._handleTabs()},t.prototype._handleTabs=function(){var t,e=this,n=this.container.find("nav"),i=this.container.find("[data-tab-id]");jQuery(n).on("click","a",function(n){n.preventDefault(),jQuery(n.target).siblings().removeClass("active"),jQuery(n.target).addClass("active"),t=e.container.find('[data-tab-id="'+jQuery(n.target).attr("data-item")+'"]'),t.length&&(i.removeClass("active"),t.addClass("active"))})},t}();e.EpsilonSectionRepeaterRow=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(38);e.SectionRepeaterEditor=i.default;var o=n(39);e.SectionRepeaterSelectize=o.default;var s=n(40);e.SectionRepeaterColorPicker=s.default;var r=n(41);e.SectionRepeaterImage=r.default;var a=n(42);e.SectionRepeaterNavigation=a.default;var c=n(43);e.SectionRepeaterSlider=c.default;var l=n(44);e.SectionRepeaterButtonGroup=l.default;var u=n(45);e.SectionRepeaterIconPicker=u.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this.props=t,this.props.container.on("epsilon-changed-position",function(){return e._destroyAndInit()}),this.init()}return t.prototype.init=function(){this.id=this.props.container.find('[data-field="'+this.props.id+'"]').attr("id"),wp.editor.initialize(this.id,{tinymce:{wpautop:!0,browser_spellcheck:!0,mediaButtons:!1,wp_autoresize_on:!0,toolbar1:"link numlist bullist forecolor backcolor bold italic underline",setup:function(t){t.on("change",function(e){t.save(),jQuery(t.getElement()).trigger("change")})}},quicktags:!0})},t.prototype.destroy=function(){wp.editor.remove(this.id)},t.prototype._destroyAndInit=function(){this.destroy(),this.init()},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init(),this.props.hasOwnProperty("linking")&&this._handleLinking()}return Object.defineProperty(t.prototype,"instance",{get:function(){return this._instance},set:function(t){this._instance=t[0].selectize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oldOptions",{get:function(){return this._oldOptions},set:function(t){this._oldOptions=t},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.instance=this.props.container.find('[data-field="'+this.props.id+'"]').selectize({plugins:["remove_button"]})},t.prototype._handleLinking=function(){var t=this,e=jQuery("#customize-control-"+this.props.linking[0]);this.oldOptions=_.sortBy(this.instance.options,function(t){return t.$order}),e.on("row:remove",function(e,n){return t._rowRemove(e,n)}),e.on("row:update",_.debounce(function(e,n,i,o){return t._rowEdit(e,n,i,o)},500)),e.on("row:add",function(e,n,i){return t._rowAdd(e,n,i)}),e.on("row:stopped-dragging",function(e,n){return t._sortExistingOptions(n)})},t.prototype._rowRemove=function(t,e){var n=this,i=e+2;_.each(this.instance.options,function(t,e){t.$order===i&&n.instance.removeOption(t.value,!1)}),this._resetOptions()},t.prototype._rowEdit=function(t,e,n,i){if(n===this.props.linking[1]){var o=e+2,s=i.value,r=this._determineIfItemExists(o);null!==r&&this._updateOption(r,s)}},t.prototype._rowAdd=function(t,e,n){n.hasOwnProperty(this.props.linking[1])&&this._createOption(n[this.props.linking[1]])},t.prototype._determineIfItemExists=function(t){var e=this.oldOptions.filter(function(e){return e.$order===t});return e.length?e[0]:null},t.prototype._sortExistingOptions=function(t){var e=[];t.map(function(t){return e.push(t+2)});var n=0;_.each(this.instance.options,function(t,i,o){if("all"===o[i].value)return!1;o[i].$order=e[n],n++}),this._resetOptions()},t.prototype._createOption=function(t){this.instance.addOption({value:t.default,text:t.default}),this._resetOptions()},t.prototype._updateOption=function(t,e){this.instance.updateOption(t.value,{text:e,value:e}),this._resetOptions()},t.prototype._resetOptions=function(){this.instance.clearCache(),this.instance.refreshOptions(!1),this.oldOptions=_.sortBy(this.instance.options,function(t){return t.$order})},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){var t=this.props.container.find('[data-field="'+this.props.id+'"]'),e={changeDelay:500,theme:"default",change:this.changePallete,format:"rgb",opacity:!0};if("function"==typeof jQuery.fn.minicolors){""!==t.attr("placeholder")&&(t.defaultValue=t.attr("placeholder")),t.minicolors(e);t.parents(".repeater-field-epsilon-color-picker").find("a").on("click",function(t){t.preventDefault();var e=jQuery(t.target).parents(".repeater-field-epsilon-color-picker").find("input.epsilon-color-picker");e.minicolors("value",jQuery(t.target).attr("data-default")),e.trigger("change")})}},t.prototype.changePallete=function(t,e){jQuery(".epsilon-color-scheme-selected").find('*[data-field-id="'+jQuery(this).attr("data-customize-setting-link")+'"]').css("background-color",t)},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){var t=this;this.container=this.props.container.find('[data-field="'+this.props.id+'"]').parents(".epsilon-controller-image-container"),this.container.on("click keypress",".image-upload-button",function(e){e.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(e)||t._imageUpload()}),this.container.on("click keypress",".image-upload-remove-button",function(e){e.preventDefault(),wp.customize.utils.isKeydownButNotEnterEvent(e)||t._imageRemoval()})},t.prototype._imageUpload=function(){var t=this,e=wp.media({multiple:!1}).open();e.on("select",function(){var n,i=t.container.find("input"),o=e.state().get("selection").first(),s=i.attr("data-size"),r={id:null,url:""};void 0===o.toJSON().sizes[s]&&(s="full"),r.id=o.id,r.url=o.toJSON().sizes[s].url,n="url"===i.attr("data-save-mode")?r.url:r.id,i.val(n),t._setImage(r.url),t.container.find(".actions .image-upload-remove-button").show()})},t.prototype._imageRemoval=function(){var t=this,e=this.container.find(".epsilon-image");e.length&&e.find("img").fadeOut(200,function(){var n,o=EpsilonTranslations.selectFile+'<span class="recommended-size"></span>',s={action:["Epsilon_Helper","get_image_sizes"],nonce:EpsilonWPUrls.ajax_nonce,args:[]},r=t.container.find("input").attr("data-size");e.removeClass("epsilon-image").addClass("placeholder").html(o),n=new i.EpsilonAjaxRequest(s),n.request(),jQuery(n).on("epsilon-received-success",function(t){_.isUndefined(n.result[r])||e.find(".recommended-size").text(n.result[r].width+" x "+n.result[r].height)})}),this.container.find(".actions .image-upload-remove-button").hide(),this.container.find("input").attr("value","").trigger("change")},t.prototype._setImage=function(t){var e=this.container.find(".epsilon-image").length?this.container.find(".epsilon-image"):this.container.find(".placeholder");e.length&&(e.removeClass("epsilon-image placeholder").addClass("epsilon-image"),e.html(""),e.append('<img style="display:none" src="'+t+'" />'),e.find("img").fadeIn(200)),this.container.find("input").trigger("change")},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').on("click",function(t){t.preventDefault(),void 0!==wp.customize.section(jQuery(t.target).attr("data-customizer-section"))&&(jQuery(t.target).attr("data-doubled")?wp.customize.section(jQuery(t.target).attr("data-customizer-section")).headContainer.trigger("click"):wp.customize.section(jQuery(t.target).attr("data-customizer-section")).focus())})},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){var t=this.props.container.parent().find(".ss-slider"),e=this.props.container.parent().find(".rl-slider"),n=e.attr("id"),i=t.attr("id"),o=jQuery("#"+i);o.slider({value:this.props.value,range:"min",min:this.props.min,max:this.props.max,step:this.props.step,slide:function(t,e){jQuery("#"+n).attr("value",e.value)},stop:function(t,e){jQuery("#"+n).trigger("change")}}),jQuery(e).on("focus",function(){jQuery(this).trigger("blur")}),jQuery("#"+n).attr("value",o.slider("value"))},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').parent().on("click","a",function(t){t.preventDefault();var e=jQuery(t.target).attr("data-value");jQuery(t.target).siblings().removeClass("active"),jQuery(t.target).addClass("active"),jQuery(t.target).parent().find("input").val(e).trigger("change")})},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.props=t,this.init()}return t.prototype.init=function(){this.props.container.find('[data-field="'+this.props.id+'"]').fontIconPicker({source:EpsilonIconPack})},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={moveElements:function(){var t=jQuery(".wp-full-overlay");jQuery("#sections-left-"+this.$ID).appendTo(t),jQuery("#importable-sections-"+this.$ID).appendTo(t)},resetIndexes:function(t){return this.state.rows.map(function(t,e){t.index=e,t.data.index=e}),t.map(function(t,e){t.index=e}),t},mergeData:function(t){return jQuery.extend(!0,{},this.$_instance.params.sections[t].fields,this.$_instance.params.sections[t].customization.styling,this.$_instance.params.sections[t].customization.layout,this.$_instance.params.sections[t].customization.colors,{customization:this.$_instance.params.sections[t].customization})},pluckValues:function(t){var e={type:t.type,index:t.index};return _.each(t,function(t){if(!t.hasOwnProperty("id"))return!1;e[t.id]=t.default}),e},setTemplateDefaults:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(t[n].default=e[n]);return t},repeaterTemplate:function(){return function(t){return _.template(jQuery(".customize-control-epsilon-repeater-content-section").html(),null,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"})(t)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setValue:function(t){this.$_instance.setting.set([]),this.$_instance.setting.set(t)},getValue:function(){return this.$_instance.setting.get()},addNewSection:function(t){var e=this.$connectors.getValue();e.push(t),this.$connectors.setValue(e)},importSections:function(t){var e=this;this.state.loading=!0,t.map(function(t){e.$actions.addSection(t)}),this.state.loading=!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);wp.customize.controlConstructor["epsilon-button-group"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonButtonGroup(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(50);wp.customize.controlConstructor["epsilon-page-changer"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonPageChanger(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=t.container.find(".new-content-item"),n=this;this.control=t,t.container.on("click",".add-new-toggle",function(t){jQuery(t.currentTarget).slideUp(180),e.slideDown(180),e.find(".create-item-input").focus()}),t.container.on("click",".add-content",function(){n.addNewPage()}),t.container.on("keydown",".create-item-input",function(t){13===t.which&&n.addNewPage()}),this.startSelectize(),this.handleEvents()}return t.prototype.startSelectize=function(){try{this.control.container.find("select").selectize()}catch(t){console.warn("selectize not yet loaded")}},t.prototype.handleEvents=function(){this.control.container.on("change","select",function(t){wp.customize.previewer.previewUrl.set(jQuery(t.target).val())})},t.prototype.addNewPage=function(){var t=this.control,e=t.container.find(".add-new-toggle"),n=t.container.find(".new-content-item"),i=t.container.find(".create-item-input"),o=i.val();t.container.find("select");if(!o)return void i.addClass("invalid");i.removeClass("invalid"),i.attr("disabled","disabled");var s=jQuery.ajax({type:"POST",dataType:"json",url:EpsilonWPUrls.ajaxurl,data:{action:"epsilon_framework_ajax_action",args:{action:["Epsilon_Helper","create_page"],nonce:EpsilonWPUrls.ajax_nonce,args:{epsilon_page_name:o,epsilon_customizer_section:t.section(),epsilon_control_id:t.params.page_builder_id}}}});s.done(function(i){if(i.status){var s=t.params.page_builder_id+"_"+i.id,r={id:s,save_as_meta:i.id,type:"epsilon-section-repeater",section:t.section(),page_builder:!0,selective_refresh:!1,sortable:!0,integrations:t.params.integrations,integrations_count:t.params.integrations_count,importable:t.params.importable,sections:t.params.sections,settings:{default:s},choices:{},value:[],label:o},a=new wp.customize.settingConstructor["epsilon-section-repeater"](s,[]);wp.customize.add(a);var c=new wp.customize.controlConstructor["epsilon-section-repeater"](s,r);wp.customize.control.add(c);var l=t.container.find("select"),u=l[0].selectize;u.addOption({value:i.url,text:o}),u.setValue(i.url)}n.slideUp(180),e.slideDown(180)}),s.always(function(t){i.val("").removeAttr("disabled")})},t}();e.EpsilonPageChanger=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(52);wp.customize.controlConstructor["epsilon-image-dimensions"]=wp.customize.Control.extend({ready:function(){var t=this;new i.EpsilonImageDimensions(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.control=null,this.linkedControl=null,this.value={width:null,height:null,ratio:!0,linked_control:""},this.imageSizes={width:0,height:0},this.hasImage=!1,this.api=wp.customize,this.control=t,this.value.linked_control=t.params.linkedControl,this.mergeValues(),this.linkedControl=this.api.control(t.params.linkedControl),this.setLinkedControlSpecs(),this.init()}return t.prototype.init=function(){var t=this;this.handleInputChanges(),this.handleAspectRatio(),this.linkedControl.setting.bind("change",function(){t.linkedControlChanged()})},t.prototype.mergeValues=function(){return jQuery.extend(this.value,this.control.params.value)},t.prototype.setLinkedControlSpecs=function(){this.imageSizes={width:0,height:0},this.hasImage=void 0!==this.linkedControl.params.attachment,this.hasImage&&(this.imageSizes={width:this.linkedControl.params.attachment.width,height:this.linkedControl.params.attachment.height})},t.prototype.handleAspectRatio=function(){var t=this;this.control.container.find('input[type="checkbox"]').on("change",function(e){t.value.ratio=jQuery(e.target).prop("checked"),t.saveData()})},t.prototype.handleInputChanges=function(){var t=this;this.control.container.find('input[type="text"]').on("keyup",_.debounce(function(e){var n=jQuery(e.target).attr("data-type"),i=jQuery(e.target).val();void 0!==n&&("string"==typeof i&&(i=parseInt(i)),t.setDimension(n,i))},200))},t.prototype.linkedControlChanged=function(){void 0!==this.linkedControl.params.attachment&&(this.setLinkedControlSpecs(),this.control.container.find('input[data-type="width"]').val(this.linkedControl.params.attachment.width).change(),this.control.container.find('input[data-type="height"]').val(this.linkedControl.params.attachment.height).change())},t.prototype.setDimension=function(t,e){void 0!==t&&this.value.hasOwnProperty(t)&&(this.value[t]=e,this.value.ratio&&this.calculateRatio(t),this.saveData())},t.prototype.calculateRatio=function(t){switch(t){case"width":this.value.height=Math.ceil(this.value.width*this.linkedControl.params.attachment.height/this.linkedControl.params.attachment.width),this.control.container.find('input[data-type="height"]').val(this.value.height);break;default:this.value.width=Math.ceil(this.value.height*this.linkedControl.params.attachment.width/this.linkedControl.params.attachment.height),this.control.container.find('input[data-type="width"]').val(this.value.width)}},t.prototype.saveData=function(){this.control.setting(JSON.stringify(this.value))},t}();e.EpsilonImageDimensions=i},function(t,e){wp.customize.panelConstructor["epsilon-panel-regular"]=wp.customize.Panel.extend({_panelEmbed:wp.customize.Panel.prototype.embed,_panelIsContextuallyActive:wp.customize.Panel.prototype.isContextuallyActive,_panelAttachEvents:wp.customize.Panel.prototype.attachEvents,ready:function(){this.params.hidden&&this.container.addClass("epsilon-hidden"),wp.customize.bind("pane-contents-reflowed",function(){var t=[];wp.customize.panel.each(function(e){"epsilon-panel-regular"===e.params.type&&void 0!==e.params.panel&&t.push(e)}),t.sort(wp.customize.utils.prioritySort).reverse(),jQuery.each(t,function(t,e){jQuery("#sub-accordion-panel-"+e.params.panel).children(".panel-meta").after(e.headContainer)}),jQuery(document).trigger("epsilon-reflown-panels")})},attachEvents:function(){var t=this;if("epsilon-panel-regular"!==this.params.type||void 0===this.params.panel)return void this._panelAttachEvents.call(this);this._panelAttachEvents.call(this),t.expanded.bind(function(e){var n=wp.customize.panel(t.params.panel);e?n.contentContainer.addClass("current-panel-parent"):n.contentContainer.removeClass("current-panel-parent")}),t.container.find(".customize-panel-back").off("click keydown").on("click keydown",function(e){wp.customize.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),t.expanded()&&wp.customize.panel(t.params.panel).expand())})},isContextuallyActive:function(){var t=this,e=this._children("panel","section"),n=0;return"epsilon-panel-regular"!==this.params.type?this._panelIsContextuallyActive.call(this):(wp.customize.panel.each(function(n){n.params.panel&&n.params.panel===t.id&&e.push(n)}),e.sort(wp.customize.utils.prioritySort),_(e).each(function(t){t.active()&&t.isContextuallyActive()&&(n+=1)}),0!==n)},embed:function(){var t=this,e=jQuery("#sub-accordion-panel-"+this.params.panel);if("epsilon-panel-regular"!==this.params.type||void 0===this.params.panel)return void this._panelEmbed.call(this);this._panelEmbed.call(this),e.append(t.headContainer)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(55);wp.customize.sectionConstructor["epsilon-section-doubled"]=wp.customize.Section.extend({ready:function(){var t=this;new i.EpsilonSectionDoubled(t)},attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.section=t,this.createParent(),this.section.container.appendTo(this.parent),this.handleEvents()}return t.prototype.handleEvents=function(){var t=this,e=this.section;e.container.on("click",".epsilon-close-doubled-section",function(t){t.preventDefault(),jQuery("body").removeClass("adding-doubled-section"),jQuery("body").find(".doubled-section-opened").removeClass("doubled-section-opened")}),e.headContainer.on("click",function(n){var i,o,s;n.preventDefault(),i=t.parent.find(".doubled-section-opened"),i.length&&i.removeClass("doubled-section-opened"),jQuery("body").hasClass("adding-doubled-section")?(o=jQuery(this).attr("id"),void 0!==o&&(o=o.replace("accordion-section-","")),s=i.attr("id"),void 0!==s&&(s=s.replace("sub-accordion-section-","")),s===o&&jQuery("body").removeClass("adding-doubled-section")):jQuery("body").addClass("adding-doubled-section"),jQuery.each(e.container,function(){jQuery(this).is("li")||jQuery(this).addClass("doubled-section-opened")})})},t.prototype.createParent=function(){var t=jQuery(".wp-full-overlay").find(".doubled-section-parent");t.length||(jQuery(".wp-full-overlay").append('<div class="doubled-section-parent"></div>'),t=jQuery(".wp-full-overlay").find(".doubled-section-parent"),this.parent=t),this.parent=t},t}();e.EpsilonSectionDoubled=i},function(t,e){wp.customize.sectionConstructor["epsilon-section-pro"]=wp.customize.Section.extend({attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(58);wp.customize.sectionConstructor["epsilon-section-recommended-actions"]=wp.customize.Section.extend({ready:function(){new i.EpsilonSectionRecommended(this)},attachEvents:function(){},isContextuallyActive:function(){return!0}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){function t(t){this.ajax=!1,this.section=t,this.context=this.section.container,this.actions=this.section.params.actions.length,this.handleDismissals(),this.handleEvents()}return t.prototype.handleDismissals=function(){this._dismissPlugin(),this._dismissAction()},t.prototype.handleEvents=function(){this.context.on("click",".epsilon-close-recommended-section",function(t){t.preventDefault(),jQuery(this).find("span").toggleClass("dashicons-arrow-down-alt2"),jQuery(".recommended-actions_container").slideToggle(200)}),jQuery(document).on("epsilon-plugin-activated",function(t,e){var n=jQuery("span#"+e.plugin).parents(".epsilon-recommended-plugins"),i=n.next();n.fadeOut("200",function(){i.css({opacity:1,height:"initial"}).fadeIn("200")})})},t.prototype._dismissPlugin=function(){var t=this;this.context.find(".epsilon-recommended-plugin-button").on("click",function(e){var n,o,s,r=jQuery(this),a=r.parents(".epsilon-recommended-actions-container"),c=a.next(),l=a.parents(".control-section-epsilon-section-recommended-actions").find("h3"),u={action:["Epsilon_Notify_System","dismiss_required_action"],nonce:EpsilonWPUrls.ajax_nonce,args:{id:jQuery(this).attr("id"),option:jQuery(this).attr("data-option")}};t.ajax||(t.ajax=!0,n=new i.EpsilonAjaxRequest(u),n.request(),jQuery(n).on("epsilon-received-success",function(e){t.ajax=!1,n.result&&"ok"===n.result.message&&a.fadeOut("200",function(){c.is("p")&&(o=l.find(".section-title"),s=o.attr("data-social"),o.text(s)),c.css({opacity:1,height:"initial"}).fadeIn("200")})}))})},t.prototype._dismissAction=function(){var t=this;this.context.find(".epsilon-dismiss-required-action").on("click",function(e){var n,o,s,r,a=jQuery(this),c=a.parents(".epsilon-recommended-actions-container"),l=c.parents(".control-section-epsilon-section-recommended-actions").find("h3"),u=l.find(".epsilon-actions-count > .current-index"),p=c.next(),d={action:["Epsilon_Notify_System","dismiss_required_action"],nonce:EpsilonWPUrls.ajax_nonce,args:{id:jQuery(this).attr("id"),option:jQuery(this).attr("data-option")}},h=u.attr("data-total"),f=c.attr("data-index");"undefined"!==h&&(h=parseInt(h)),"undefined"!==f&&(f=parseInt(f)),t.ajax||(t.ajax=!0,r=new i.EpsilonAjaxRequest(d),r.request(),jQuery(r).on("epsilon-received-success",function(e){t.ajax=!1,r.result&&"ok"===r.result.message&&(h<=f?(n=l.find(".section-title"),o=jQuery(".epsilon-recommended-plugins"),s=n.attr("data-social"),o.length&&(s=n.attr("data-plugin_text")),l.find(".epsilon-actions-count").remove(),n.text(s)):u.text(f+1),c.fadeOut("200",function(){p.css({opacity:1,height:"initial"}).fadeIn("200")}))}))})},t}();e.EpsilonSectionRecommended=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;this.objects=[],wp.customize.bind("ready",function(){t.collectElements(),t.handleCloseEvent()})}return t.prototype.handleCloseEvent=function(){this.objects.map(function(t){t.show(),t.on("click",".epsilon-button-link-close-section",function(e){t.hide(200)})})},t.prototype.collectElements=function(){var t=this;jQuery(".epsilon-button-link-close-section").map(function(e,n){t.objects.push(jQuery(n).parent())})},t}();e.EpsilonSectionDescriptionEnhancer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;this.sections=[],wp.customize.bind("ready",function(){t.collectSections(),t.handleEvents()})}return t.prototype.collectSections=function(){var t=this;_.each(jQuery("[id^=accordion-section-]"),function(e){var n=jQuery(e).attr("id");n.search("header")>-1&&t.sections.push({frontend:"#wrap",section:n,changePage:!1,type:"header"}),n.search("footer")>-1&&t.sections.push({frontend:"#footer",section:n,changePage:!1,type:"footer"}),EpsilonWPUrls.post_page&&(n.search("blog")>-1||n.search("header_image")>-1)&&t.sections.push({section:n,changePage:!0,url:EpsilonWPUrls.post_page}),EpsilonWPUrls.front_page&&n.search("static_front_page")>-1&&t.sections.push({section:n,changePage:!0,url:EpsilonWPUrls.front_page})})},t.prototype.handleEvents=function(){var t=this;this.sections.map(function(e){jQuery("#"+e.section).on("click","h3",function(n){e.changePage?t._changePage(e):t._scrollTo(e)})})},t.prototype._changePage=function(t){wp.customize.previewer.previewUrl(t.url),jQuery("[id^=sub-"+t.section+"]").on("click","button.customize-section-back",function(){wp.customize.previewer.previewUrl(wp.customize.previewer.allowedUrls[0])})},t.prototype._scrollTo=function(t){wp.customize.previewer.send("epsilon-"+t.type+"-focused",t.frontend)},t}();e.EpsilonZoneFocus=i}]);
//# sourceMappingURL=epsilon-framework-customizer.js.map